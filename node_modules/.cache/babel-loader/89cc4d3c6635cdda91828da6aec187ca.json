{"ast":null,"code":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { Authenticator } from './Authenticator';\nexport { Authenticator } from './Authenticator';\nexport { AuthPiece } from './AuthPiece';\nexport { SignIn } from './SignIn';\nexport { ConfirmSignIn } from './ConfirmSignIn';\nexport { SignOut } from './SignOut';\nexport { RequireNewPassword } from './RequireNewPassword';\nexport { SignUp } from './SignUp';\nexport { ConfirmSignUp } from './ConfirmSignUp';\nexport { VerifyContact } from './VerifyContact';\nexport { ForgotPassword } from './ForgotPassword';\nexport { Greetings } from './Greetings';\nexport { FederatedSignIn, FederatedButtons } from './FederatedSignIn';\nexport { TOTPSetup } from './TOTPSetup';\nexport { Loading } from './Loading';\nexport * from './Provider';\nexport * from './common/types';\nexport function withAuthenticator(Comp, includeGreetings, authenticatorComponents, federated, theme, signUpConfig) {\n  if (includeGreetings === void 0) {\n    includeGreetings = false;\n  }\n\n  if (authenticatorComponents === void 0) {\n    authenticatorComponents = [];\n  }\n\n  if (federated === void 0) {\n    federated = null;\n  }\n\n  if (theme === void 0) {\n    theme = null;\n  }\n\n  if (signUpConfig === void 0) {\n    signUpConfig = {};\n  }\n\n  return (\n    /** @class */\n    function (_super) {\n      __extends(class_1, _super);\n\n      function class_1(props) {\n        var _this = _super.call(this, props) || this;\n\n        _this.handleAuthStateChange = _this.handleAuthStateChange.bind(_this);\n        _this.state = {\n          authState: props.authState || null,\n          authData: props.authData || null\n        };\n        _this.authConfig = {};\n\n        if (typeof includeGreetings === 'object' && includeGreetings !== null) {\n          _this.authConfig = Object.assign(_this.authConfig, includeGreetings);\n        } else {\n          _this.authConfig = {\n            includeGreetings: includeGreetings,\n            authenticatorComponents: authenticatorComponents,\n            federated: federated,\n            theme: theme,\n            signUpConfig: signUpConfig\n          };\n        }\n\n        return _this;\n      }\n\n      class_1.prototype.handleAuthStateChange = function (state, data) {\n        this.setState({\n          authState: state,\n          authData: data\n        });\n      };\n\n      class_1.prototype.render = function () {\n        var _a = this.state,\n            authState = _a.authState,\n            authData = _a.authData;\n\n        if (authState === 'signedIn') {\n          return React.createElement(React.Fragment, null, this.authConfig.includeGreetings ? React.createElement(Authenticator, __assign({}, this.props, {\n            theme: this.authConfig.theme,\n            federated: this.authConfig.federated || this.props.federated,\n            hideDefault: this.authConfig.authenticatorComponents && this.authConfig.authenticatorComponents.length > 0,\n            signUpConfig: this.authConfig.signUpConfig,\n            usernameAttributes: this.authConfig.usernameAttributes,\n            onStateChange: this.handleAuthStateChange,\n            children: this.authConfig.authenticatorComponents || []\n          })) : null, React.createElement(Comp, __assign({}, this.props, {\n            authState: authState,\n            authData: authData,\n            onStateChange: this.handleAuthStateChange\n          })));\n        }\n\n        return React.createElement(Authenticator, __assign({}, this.props, {\n          theme: this.authConfig.theme,\n          federated: this.authConfig.federated || this.props.federated,\n          hideDefault: this.authConfig.authenticatorComponents && this.authConfig.authenticatorComponents.length > 0,\n          signUpConfig: this.authConfig.signUpConfig,\n          usernameAttributes: this.authConfig.usernameAttributes,\n          onStateChange: this.handleAuthStateChange,\n          children: this.authConfig.authenticatorComponents || []\n        }));\n      };\n\n      return class_1;\n    }(React.Component)\n  );\n}\n\nvar AuthenticatorWrapper =\n/** @class */\nfunction (_super) {\n  __extends(AuthenticatorWrapper, _super);\n\n  function AuthenticatorWrapper(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      auth: 'init'\n    };\n    _this.handleAuthState = _this.handleAuthState.bind(_this);\n    _this.renderChildren = _this.renderChildren.bind(_this);\n    return _this;\n  }\n\n  AuthenticatorWrapper.prototype.handleAuthState = function (state, data) {\n    this.setState({\n      auth: state,\n      authData: data\n    });\n  };\n\n  AuthenticatorWrapper.prototype.renderChildren = function () {\n    // @ts-ignore\n    return this.props.children(this.state.auth);\n  };\n\n  AuthenticatorWrapper.prototype.render = function () {\n    return React.createElement(\"div\", null, React.createElement(Authenticator, __assign({}, this.props, {\n      onStateChange: this.handleAuthState\n    })), this.renderChildren());\n  };\n\n  return AuthenticatorWrapper;\n}(React.Component);\n\nexport { AuthenticatorWrapper };","map":{"version":3,"sources":["../../src/Auth/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as React from 'react';\r\nimport { Authenticator } from './Authenticator';\r\nexport { Authenticator } from './Authenticator';\r\nexport { AuthPiece } from './AuthPiece';\r\nexport { SignIn } from './SignIn';\r\nexport { ConfirmSignIn } from './ConfirmSignIn';\r\nexport { SignOut } from './SignOut';\r\nexport { RequireNewPassword } from './RequireNewPassword';\r\nexport { SignUp } from './SignUp';\r\nexport { ConfirmSignUp } from './ConfirmSignUp';\r\nexport { VerifyContact } from './VerifyContact';\r\nexport { ForgotPassword } from './ForgotPassword';\r\nexport { Greetings } from './Greetings';\r\nexport { FederatedSignIn, FederatedButtons } from './FederatedSignIn';\r\nexport { TOTPSetup } from './TOTPSetup';\r\nexport { Loading } from './Loading';\r\nexport * from './Provider';\r\nexport * from './common/types';\r\nexport function withAuthenticator(Comp, includeGreetings, authenticatorComponents, federated, theme, signUpConfig) {\r\n    if (includeGreetings === void 0) { includeGreetings = false; }\r\n    if (authenticatorComponents === void 0) { authenticatorComponents = []; }\r\n    if (federated === void 0) { federated = null; }\r\n    if (theme === void 0) { theme = null; }\r\n    if (signUpConfig === void 0) { signUpConfig = {}; }\r\n    return /** @class */ (function (_super) {\r\n        __extends(class_1, _super);\r\n        function class_1(props) {\r\n            var _this = _super.call(this, props) || this;\r\n            _this.handleAuthStateChange = _this.handleAuthStateChange.bind(_this);\r\n            _this.state = {\r\n                authState: props.authState || null,\r\n                authData: props.authData || null,\r\n            };\r\n            _this.authConfig = {};\r\n            if (typeof includeGreetings === 'object' && includeGreetings !== null) {\r\n                _this.authConfig = Object.assign(_this.authConfig, includeGreetings);\r\n            }\r\n            else {\r\n                _this.authConfig = {\r\n                    includeGreetings: includeGreetings,\r\n                    authenticatorComponents: authenticatorComponents,\r\n                    federated: federated,\r\n                    theme: theme,\r\n                    signUpConfig: signUpConfig,\r\n                };\r\n            }\r\n            return _this;\r\n        }\r\n        class_1.prototype.handleAuthStateChange = function (state, data) {\r\n            this.setState({ authState: state, authData: data });\r\n        };\r\n        class_1.prototype.render = function () {\r\n            var _a = this.state, authState = _a.authState, authData = _a.authData;\r\n            if (authState === 'signedIn') {\r\n                return (React.createElement(React.Fragment, null,\r\n                    this.authConfig.includeGreetings ? (React.createElement(Authenticator, __assign({}, this.props, { theme: this.authConfig.theme, federated: this.authConfig.federated || this.props.federated, hideDefault: this.authConfig.authenticatorComponents &&\r\n                            this.authConfig.authenticatorComponents.length > 0, signUpConfig: this.authConfig.signUpConfig, usernameAttributes: this.authConfig.usernameAttributes, onStateChange: this.handleAuthStateChange, children: this.authConfig.authenticatorComponents || [] }))) : null,\r\n                    React.createElement(Comp, __assign({}, this.props, { authState: authState, authData: authData, onStateChange: this.handleAuthStateChange }))));\r\n            }\r\n            return (React.createElement(Authenticator, __assign({}, this.props, { theme: this.authConfig.theme, federated: this.authConfig.federated || this.props.federated, hideDefault: this.authConfig.authenticatorComponents &&\r\n                    this.authConfig.authenticatorComponents.length > 0, signUpConfig: this.authConfig.signUpConfig, usernameAttributes: this.authConfig.usernameAttributes, onStateChange: this.handleAuthStateChange, children: this.authConfig.authenticatorComponents || [] })));\r\n        };\r\n        return class_1;\r\n    }(React.Component));\r\n}\r\nvar AuthenticatorWrapper = /** @class */ (function (_super) {\r\n    __extends(AuthenticatorWrapper, _super);\r\n    function AuthenticatorWrapper(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.state = { auth: 'init' };\r\n        _this.handleAuthState = _this.handleAuthState.bind(_this);\r\n        _this.renderChildren = _this.renderChildren.bind(_this);\r\n        return _this;\r\n    }\r\n    AuthenticatorWrapper.prototype.handleAuthState = function (state, data) {\r\n        this.setState({ auth: state, authData: data });\r\n    };\r\n    AuthenticatorWrapper.prototype.renderChildren = function () {\r\n        // @ts-ignore\r\n        return this.props.children(this.state.auth);\r\n    };\r\n    AuthenticatorWrapper.prototype.render = function () {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(Authenticator, __assign({}, this.props, { onStateChange: this.handleAuthState })),\r\n            this.renderChildren()));\r\n    };\r\n    return AuthenticatorWrapper;\r\n}(React.Component));\r\nexport { AuthenticatorWrapper };\r\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}