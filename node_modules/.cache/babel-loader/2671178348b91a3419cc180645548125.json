{"ast":null,"code":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as React from 'react';\nimport { I18n, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { Picker } from './Picker';\nimport AmplifyTheme from '../Amplify-UI/Amplify-UI-Theme';\nimport { FormSection, SectionHeader, SectionBody, PhotoPlaceholder } from '../Amplify-UI/Amplify-UI-Components-React';\nvar PickerPreview = {\n  maxWidth: '100%'\n};\nvar logger = new Logger('PhotoPicker');\n\nvar PhotoPicker =\n/** @class */\nfunction (_super) {\n  __extends(PhotoPicker, _super);\n\n  function PhotoPicker(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.handlePick = _this.handlePick.bind(_this);\n    _this.state = {\n      previewSrc: props.previewSrc\n    };\n    return _this;\n  }\n\n  PhotoPicker.prototype.handlePick = function (data) {\n    var that = this;\n    var file = data.file,\n        name = data.name,\n        size = data.size,\n        type = data.type;\n    var _a = this.props,\n        preview = _a.preview,\n        onPick = _a.onPick,\n        onLoad = _a.onLoad;\n\n    if (onPick) {\n      onPick(data);\n    }\n\n    if (preview) {\n      var reader = new FileReader();\n\n      reader.onload = function (e) {\n        var url = e.target.result; // @ts-ignore\n\n        that.setState({\n          previewSrc: url\n        });\n\n        if (onLoad) {\n          onLoad(url);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    }\n  };\n\n  PhotoPicker.prototype.render = function () {\n    var preview = this.props.preview;\n    var previewSrc = this.state.previewSrc;\n    var headerText = this.props.headerText || 'Photos';\n    var headerHint = this.props.headerHint || 'Add your photos by clicking below';\n    var title = this.props.title || 'Select a Photo';\n    var theme = this.props.theme || AmplifyTheme;\n    var previewStyle = Object.assign({}, PickerPreview, theme.pickerPreview);\n    var previewHidden = !(preview && preview !== 'hidden');\n    return React.createElement(FormSection, {\n      theme: theme\n    }, React.createElement(SectionHeader, {\n      theme: theme,\n      hint: headerHint\n    }, I18n.get(headerText)), React.createElement(SectionBody, {\n      theme: theme\n    }, previewSrc ? previewHidden ? 'The image has been selected' : React.createElement(\"img\", {\n      src: previewSrc,\n      style: previewStyle\n    }) : React.createElement(PhotoPlaceholder, {\n      theme: theme\n    })), React.createElement(Picker, {\n      title: title,\n      accept: \"image/*\",\n      theme: theme,\n      onPick: this.handlePick\n    }));\n  };\n\n  return PhotoPicker;\n}(React.Component);\n\nexport { PhotoPicker };\n/**\r\n * @deprecated use named import\r\n */\n\nexport default PhotoPicker;","map":{"version":3,"sources":["../../src/Widget/PhotoPicker.tsx"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AAEA,SAAS,IAAT,EAAe,aAAa,IAAI,MAAhC,QAA8C,mBAA9C;AACA,SAAS,MAAT,QAAuB,UAAvB;AACA,OAAO,YAAP,MAAyB,gCAAzB;AACA,SACC,WADD,EAEC,aAFD,EAGC,WAHD,EAIC,gBAJD,QAKO,2CALP;AAOA,IAAM,aAAa,GAAG;AACrB,EAAA,QAAQ,EAAE;AADW,CAAtB;AAIA,IAAM,MAAM,GAAG,IAAI,MAAJ,CAAW,aAAX,CAAf;;AAiBA,IAAA,WAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAiC,EAAA,SAAA,CAAA,WAAA,EAAA,MAAA,CAAA;;AAIhC,WAAA,WAAA,CAAY,KAAZ,EAAiB;AAAjB,QAAA,KAAA,GACC,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,KAAN,KAAY,IADb;;AAGC,IAAA,KAAI,CAAC,UAAL,GAAkB,KAAI,CAAC,UAAL,CAAgB,IAAhB,CAAqB,KAArB,CAAlB;AAEA,IAAA,KAAI,CAAC,KAAL,GAAa;AACZ,MAAA,UAAU,EAAE,KAAK,CAAC;AADN,KAAb;;AAGA;;AAED,EAAA,WAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,IAAX,EAAe;AACd,QAAM,IAAI,GAAG,IAAb;AACQ,QAAA,IAAA,GAAA,IAAA,CAAA,IAAA;AAAA,QAAM,IAAA,GAAA,IAAA,CAAA,IAAN;AAAA,QAAY,IAAA,GAAA,IAAA,CAAA,IAAZ;AAAA,QAAkB,IAAA,GAAA,IAAA,CAAA,IAAlB;AACF,QAAA,EAAA,GAAA,KAAA,KAAA;AAAA,QAAE,OAAA,GAAA,EAAA,CAAA,OAAF;AAAA,QAAW,MAAA,GAAA,EAAA,CAAA,MAAX;AAAA,QAAmB,MAAA,GAAA,EAAA,CAAA,MAAnB;;AAEN,QAAI,MAAJ,EAAY;AACX,MAAA,MAAM,CAAC,IAAD,CAAN;AACA;;AAED,QAAI,OAAJ,EAAa;AACZ,UAAM,MAAM,GAAG,IAAI,UAAJ,EAAf;;AACA,MAAA,MAAM,CAAC,MAAP,GAAgB,UAAS,CAAT,EAAU;AACzB,YAAM,GAAG,GAAG,CAAC,CAAC,MAAF,CAAS,MAArB,CADyB,CAEzB;;AACA,QAAA,IAAI,CAAC,QAAL,CAAc;AAAE,UAAA,UAAU,EAAE;AAAd,SAAd;;AACA,YAAI,MAAJ,EAAY;AACX,UAAA,MAAM,CAAC,GAAD,CAAN;AACA;AACD,OAPD;;AAQA,MAAA,MAAM,CAAC,aAAP,CAAqB,IAArB;AACA;AACD,GArBD;;AAuBA,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACS,QAAA,OAAA,GAAA,KAAA,KAAA,CAAA,OAAA;AACA,QAAA,UAAA,GAAA,KAAA,KAAA,CAAA,UAAA;AAER,QAAM,UAAU,GAAG,KAAK,KAAL,CAAW,UAAX,IAAyB,QAA5C;AACA,QAAM,UAAU,GACf,KAAK,KAAL,CAAW,UAAX,IAAyB,mCAD1B;AAEA,QAAM,KAAK,GAAG,KAAK,KAAL,CAAW,KAAX,IAAoB,gBAAlC;AAEA,QAAM,KAAK,GAAG,KAAK,KAAL,CAAW,KAAX,IAAoB,YAAlC;AACA,QAAM,YAAY,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,aAAlB,EAAiC,KAAK,CAAC,aAAvC,CAArB;AAEA,QAAM,aAAa,GAAG,EAAE,OAAO,IAAI,OAAO,KAAK,QAAzB,CAAtB;AAEA,WACC,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY;AAAC,MAAA,KAAK,EAAE;AAAR,KAAZ,EACC,KAAA,CAAA,aAAA,CAAC,aAAD,EAAc;AAAC,MAAA,KAAK,EAAE,KAAR;AAAe,MAAA,IAAI,EAAE;AAArB,KAAd,EACE,IAAI,CAAC,GAAL,CAAS,UAAT,CADF,CADD,EAIC,KAAA,CAAA,aAAA,CAAC,WAAD,EAAY;AAAC,MAAA,KAAK,EAAE;AAAR,KAAZ,EACE,UAAU,GACV,aAAa,GACZ,6BADY,GAGZ,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,GAAG,EAAE,UAAV;AAAsB,MAAA,KAAK,EAAE;AAA7B,KAAA,CAJS,GAOV,KAAA,CAAA,aAAA,CAAC,gBAAD,EAAiB;AAAC,MAAA,KAAK,EAAE;AAAR,KAAjB,CARF,CAJD,EAeC,KAAA,CAAA,aAAA,CAAC,MAAD,EAAO;AACN,MAAA,KAAK,EAAE,KADD;AAEN,MAAA,MAAM,EAAC,SAFD;AAGN,MAAA,KAAK,EAAE,KAHD;AAIN,MAAA,MAAM,EAAE,KAAK;AAJP,KAAP,CAfD,CADD;AAwBA,GAtCD;;AAuCD,SAAA,WAAA;AAAC,CA5ED,CAAiC,KAAK,CAAC,SAAvC,CAAA;;;AA8EA;;;;AAGA,eAAe,WAAf","sourceRoot":"","sourcesContent":["/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as React from 'react';\r\nimport { I18n, ConsoleLogger as Logger } from '@aws-amplify/core';\r\nimport { Picker } from './Picker';\r\nimport AmplifyTheme from '../Amplify-UI/Amplify-UI-Theme';\r\nimport { FormSection, SectionHeader, SectionBody, PhotoPlaceholder, } from '../Amplify-UI/Amplify-UI-Components-React';\r\nvar PickerPreview = {\r\n    maxWidth: '100%',\r\n};\r\nvar logger = new Logger('PhotoPicker');\r\nvar PhotoPicker = /** @class */ (function (_super) {\r\n    __extends(PhotoPicker, _super);\r\n    function PhotoPicker(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handlePick = _this.handlePick.bind(_this);\r\n        _this.state = {\r\n            previewSrc: props.previewSrc,\r\n        };\r\n        return _this;\r\n    }\r\n    PhotoPicker.prototype.handlePick = function (data) {\r\n        var that = this;\r\n        var file = data.file, name = data.name, size = data.size, type = data.type;\r\n        var _a = this.props, preview = _a.preview, onPick = _a.onPick, onLoad = _a.onLoad;\r\n        if (onPick) {\r\n            onPick(data);\r\n        }\r\n        if (preview) {\r\n            var reader = new FileReader();\r\n            reader.onload = function (e) {\r\n                var url = e.target.result;\r\n                // @ts-ignore\r\n                that.setState({ previewSrc: url });\r\n                if (onLoad) {\r\n                    onLoad(url);\r\n                }\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n    PhotoPicker.prototype.render = function () {\r\n        var preview = this.props.preview;\r\n        var previewSrc = this.state.previewSrc;\r\n        var headerText = this.props.headerText || 'Photos';\r\n        var headerHint = this.props.headerHint || 'Add your photos by clicking below';\r\n        var title = this.props.title || 'Select a Photo';\r\n        var theme = this.props.theme || AmplifyTheme;\r\n        var previewStyle = Object.assign({}, PickerPreview, theme.pickerPreview);\r\n        var previewHidden = !(preview && preview !== 'hidden');\r\n        return (React.createElement(FormSection, { theme: theme },\r\n            React.createElement(SectionHeader, { theme: theme, hint: headerHint }, I18n.get(headerText)),\r\n            React.createElement(SectionBody, { theme: theme }, previewSrc ? (previewHidden ? ('The image has been selected') : (React.createElement(\"img\", { src: previewSrc, style: previewStyle }))) : (React.createElement(PhotoPlaceholder, { theme: theme }))),\r\n            React.createElement(Picker, { title: title, accept: \"image/*\", theme: theme, onPick: this.handlePick })));\r\n    };\r\n    return PhotoPicker;\r\n}(React.Component));\r\nexport { PhotoPicker };\r\n/**\r\n * @deprecated use named import\r\n */\r\nexport default PhotoPicker;\r\n//# sourceMappingURL=PhotoPicker.js.map"]},"metadata":{},"sourceType":"module"}