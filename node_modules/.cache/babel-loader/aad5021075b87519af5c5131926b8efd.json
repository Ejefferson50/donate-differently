{"ast":null,"code":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { Analytics } from '@aws-amplify/analytics';\nvar Default_Track_Events = ['componentDidMount', 'componentDidUpdate', 'compomentWillUnmount', 'compomentDidCatch', 'render'];\nexport function trackLifecycle(Comp, trackerName, events) {\n  if (events === void 0) {\n    events = Default_Track_Events;\n  }\n\n  return (\n    /** @class */\n    function (_super) {\n      __extends(WithTrackLifecycle, _super);\n\n      function WithTrackLifecycle(props) {\n        var _this = _super.call(this, props) || this;\n\n        _this.trackerName = trackerName;\n        _this.trackEvents = events;\n\n        _this.track('constructor');\n\n        return _this;\n      }\n\n      WithTrackLifecycle.prototype.track = function (event) {\n        var filtered = this.trackEvents.filter(function (item) {\n          return item === event;\n        });\n\n        if (filtered.length > 0) {\n          if (Analytics && typeof Analytics.record === 'function') {\n            Analytics.record({\n              name: this.trackerName,\n              attributes: {\n                event: event\n              }\n            });\n          } else {\n            throw new Error('No Analytics module found, please ensure @aws-amplify/analytics is imported');\n          }\n        }\n      };\n\n      WithTrackLifecycle.prototype.componentWillMount = function () {\n        this.track('componentWillMount');\n      };\n\n      WithTrackLifecycle.prototype.componentDidMount = function () {\n        this.track('componentDidMount');\n      };\n\n      WithTrackLifecycle.prototype.componentWillUnmount = function () {\n        this.track('componentWillUnmount');\n      };\n\n      WithTrackLifecycle.prototype.componentDidCatch = function () {\n        this.track('componentDidCatch');\n      };\n\n      WithTrackLifecycle.prototype.componentWillReceiveProps = function () {\n        this.track('componentWillReceiveProps');\n      };\n\n      WithTrackLifecycle.prototype.shouldComponentUpdate = function () {\n        this.track('shouldComponentUpdate');\n        return true;\n      };\n\n      WithTrackLifecycle.prototype.componentWillUpdate = function () {\n        this.track('componentWillUpdate');\n      };\n\n      WithTrackLifecycle.prototype.componentDidUpdate = function () {\n        this.track('componentDidUpdate');\n      };\n\n      WithTrackLifecycle.prototype.setState = function () {\n        this.track('setState');\n      };\n\n      WithTrackLifecycle.prototype.forceUpdate = function () {\n        this.track('forceUpdate');\n      };\n\n      WithTrackLifecycle.prototype.render = function () {\n        this.track('render');\n        return React.createElement(Comp, __assign({}, this.props));\n      };\n\n      return WithTrackLifecycle;\n    }(React.Component)\n  );\n}","map":{"version":3,"sources":["../../src/Analytics/trackLifecycle.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as React from 'react';\r\nimport { Analytics } from '@aws-amplify/analytics';\r\nvar Default_Track_Events = [\r\n    'componentDidMount',\r\n    'componentDidUpdate',\r\n    'compomentWillUnmount',\r\n    'compomentDidCatch',\r\n    'render',\r\n];\r\nexport function trackLifecycle(Comp, trackerName, events) {\r\n    if (events === void 0) { events = Default_Track_Events; }\r\n    return /** @class */ (function (_super) {\r\n        __extends(WithTrackLifecycle, _super);\r\n        function WithTrackLifecycle(props) {\r\n            var _this = _super.call(this, props) || this;\r\n            _this.trackerName = trackerName;\r\n            _this.trackEvents = events;\r\n            _this.track('constructor');\r\n            return _this;\r\n        }\r\n        WithTrackLifecycle.prototype.track = function (event) {\r\n            var filtered = this.trackEvents.filter(function (item) { return item === event; });\r\n            if (filtered.length > 0) {\r\n                if (Analytics && typeof Analytics.record === 'function') {\r\n                    Analytics.record({\r\n                        name: this.trackerName,\r\n                        attributes: { event: event },\r\n                    });\r\n                }\r\n                else {\r\n                    throw new Error('No Analytics module found, please ensure @aws-amplify/analytics is imported');\r\n                }\r\n            }\r\n        };\r\n        WithTrackLifecycle.prototype.componentWillMount = function () {\r\n            this.track('componentWillMount');\r\n        };\r\n        WithTrackLifecycle.prototype.componentDidMount = function () {\r\n            this.track('componentDidMount');\r\n        };\r\n        WithTrackLifecycle.prototype.componentWillUnmount = function () {\r\n            this.track('componentWillUnmount');\r\n        };\r\n        WithTrackLifecycle.prototype.componentDidCatch = function () {\r\n            this.track('componentDidCatch');\r\n        };\r\n        WithTrackLifecycle.prototype.componentWillReceiveProps = function () {\r\n            this.track('componentWillReceiveProps');\r\n        };\r\n        WithTrackLifecycle.prototype.shouldComponentUpdate = function () {\r\n            this.track('shouldComponentUpdate');\r\n            return true;\r\n        };\r\n        WithTrackLifecycle.prototype.componentWillUpdate = function () {\r\n            this.track('componentWillUpdate');\r\n        };\r\n        WithTrackLifecycle.prototype.componentDidUpdate = function () {\r\n            this.track('componentDidUpdate');\r\n        };\r\n        WithTrackLifecycle.prototype.setState = function () {\r\n            this.track('setState');\r\n        };\r\n        WithTrackLifecycle.prototype.forceUpdate = function () {\r\n            this.track('forceUpdate');\r\n        };\r\n        WithTrackLifecycle.prototype.render = function () {\r\n            this.track('render');\r\n            return React.createElement(Comp, __assign({}, this.props));\r\n        };\r\n        return WithTrackLifecycle;\r\n    }(React.Component));\r\n}\r\n//# sourceMappingURL=trackLifecycle.js.map"]},"metadata":{},"sourceType":"module"}