"use strict";

const HTMLElementImpl = require("./HTMLElement-impl").implementation;
<<<<<<< HEAD
const { childrenByHTMLLocalName } = require("../helpers/traversal");
=======
<<<<<<< HEAD
const { childrenByHTMLLocalName } = require("../helpers/traversal");
=======
<<<<<<< HEAD
<<<<<<< HEAD
const { childrenByHTMLLocalName } = require("../helpers/traversal");
=======
const { childrenByLocalName } = require("../helpers/traversal");
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
const { childrenByHTMLLocalName } = require("../helpers/traversal");
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
>>>>>>> 71cc80d5c04c1d732a53d72b3d4830571f913b17
>>>>>>> d73b1f44f038f8f47fb4f029bc08a770a21d43c1
const HTMLCollection = require("../generated/HTMLCollection");
const DOMException = require("domexception");

class HTMLTableSectionElementImpl extends HTMLElementImpl {
  get rows() {
    if (!this._rows) {
      this._rows = HTMLCollection.createImpl([], {
        element: this,
<<<<<<< HEAD
        query: () => childrenByHTMLLocalName(this, "tr")
=======
<<<<<<< HEAD
        query: () => childrenByHTMLLocalName(this, "tr")
=======
<<<<<<< HEAD
<<<<<<< HEAD
        query: () => childrenByHTMLLocalName(this, "tr")
=======
        query: () => childrenByLocalName(this, "tr")
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
        query: () => childrenByHTMLLocalName(this, "tr")
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
>>>>>>> 71cc80d5c04c1d732a53d72b3d4830571f913b17
>>>>>>> d73b1f44f038f8f47fb4f029bc08a770a21d43c1
      });
    }
    return this._rows;
  }

  insertRow(index) {
    if (index < -1 || index > this.rows.length) {
      throw new DOMException("Cannot insert a row at an index that is less than -1 or greater than the number of " +
        "existing rows", "IndexSizeError");
    }

    const tr = this._ownerDocument.createElement("tr");

    if (index === -1 || index === this.rows.length) {
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
>>>>>>> 71cc80d5c04c1d732a53d72b3d4830571f913b17
>>>>>>> d73b1f44f038f8f47fb4f029bc08a770a21d43c1
      this.appendChild(tr);
    } else {
      const beforeTR = this.rows.item(index);
      this.insertBefore(tr, beforeTR);
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
      this._append(tr);
    } else {
      const beforeTR = this.rows.item(index);
      this._insert(tr, beforeTR);
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
>>>>>>> 71cc80d5c04c1d732a53d72b3d4830571f913b17
>>>>>>> d73b1f44f038f8f47fb4f029bc08a770a21d43c1
    }

    return tr;
  }

  deleteRow(index) {
    if (index < -1 || index >= this.rows.length) {
      throw new DOMException(`Cannot delete a row at index ${index}, where no row exists`, "IndexSizeError");
    }

    if (index === -1) {
      if (this.rows.length > 0) {
        const tr = this.rows.item(this.rows.length - 1);
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
>>>>>>> 71cc80d5c04c1d732a53d72b3d4830571f913b17
>>>>>>> d73b1f44f038f8f47fb4f029bc08a770a21d43c1
        this.removeChild(tr);
      }
    } else {
      const tr = this.rows.item(index);
      this.removeChild(tr);
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
        this._remove(tr);
      }
    } else {
      const tr = this.rows.item(index);
      this._remove(tr);
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
=======
>>>>>>> b9690f13ae0b02552662ffbd680e2069f9283c9e
>>>>>>> 71cc80d5c04c1d732a53d72b3d4830571f913b17
>>>>>>> d73b1f44f038f8f47fb4f029bc08a770a21d43c1
    }
  }
}

module.exports = {
  implementation: HTMLTableSectionElementImpl
};
