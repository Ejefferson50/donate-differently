import { from } from '../observable/from';
import { isArray } from '../util/isArray';
<<<<<<< HEAD
import { SimpleOuterSubscriber, SimpleInnerSubscriber, innerSubscribe } from '../innerSubscribe';
=======
import { OuterSubscriber } from '../OuterSubscriber';
import { InnerSubscriber } from '../InnerSubscriber';
import { subscribeToResult } from '../util/subscribeToResult';
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
export function onErrorResumeNext(...nextSources) {
    if (nextSources.length === 1 && isArray(nextSources[0])) {
        nextSources = nextSources[0];
    }
    return (source) => source.lift(new OnErrorResumeNextOperator(nextSources));
}
export function onErrorResumeNextStatic(...nextSources) {
<<<<<<< HEAD
    let source = undefined;
=======
    let source = null;
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
    if (nextSources.length === 1 && isArray(nextSources[0])) {
        nextSources = nextSources[0];
    }
    source = nextSources.shift();
<<<<<<< HEAD
    return from(source).lift(new OnErrorResumeNextOperator(nextSources));
=======
    return from(source, null).lift(new OnErrorResumeNextOperator(nextSources));
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
}
class OnErrorResumeNextOperator {
    constructor(nextSources) {
        this.nextSources = nextSources;
    }
    call(subscriber, source) {
        return source.subscribe(new OnErrorResumeNextSubscriber(subscriber, this.nextSources));
    }
}
<<<<<<< HEAD
class OnErrorResumeNextSubscriber extends SimpleOuterSubscriber {
=======
class OnErrorResumeNextSubscriber extends OuterSubscriber {
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
    constructor(destination, nextSources) {
        super(destination);
        this.destination = destination;
        this.nextSources = nextSources;
    }
<<<<<<< HEAD
    notifyError() {
        this.subscribeToNextSource();
    }
    notifyComplete() {
=======
    notifyError(error, innerSub) {
        this.subscribeToNextSource();
    }
    notifyComplete(innerSub) {
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
        this.subscribeToNextSource();
    }
    _error(err) {
        this.subscribeToNextSource();
        this.unsubscribe();
    }
    _complete() {
        this.subscribeToNextSource();
        this.unsubscribe();
    }
    subscribeToNextSource() {
        const next = this.nextSources.shift();
        if (!!next) {
<<<<<<< HEAD
            const innerSubscriber = new SimpleInnerSubscriber(this);
            const destination = this.destination;
            destination.add(innerSubscriber);
            const innerSubscription = innerSubscribe(next, innerSubscriber);
=======
            const innerSubscriber = new InnerSubscriber(this, undefined, undefined);
            const destination = this.destination;
            destination.add(innerSubscriber);
            const innerSubscription = subscribeToResult(this, next, undefined, undefined, innerSubscriber);
>>>>>>> 782567c486993431d88a7d42ed2c18702ecdfd4f
            if (innerSubscription !== innerSubscriber) {
                destination.add(innerSubscription);
            }
        }
        else {
            this.destination.complete();
        }
    }
}
//# sourceMappingURL=onErrorResumeNext.js.map